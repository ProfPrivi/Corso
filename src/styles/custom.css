/* Riduce la larghezza della sidebar */
:root {
  /* Larghezza sidebar ridotta da 18rem (default) a 14rem */
  --sl-sidebar-width: 14rem;
  /* Larghezza sidebar destra (TOC). Default ~18rem: la riduciamo per recuperare spazio. */
  --sl-toc-width: 12.5rem;
}

/* Su schermi medi, riduce ulteriormente */
@media (min-width: 50rem) and (max-width: 72rem) {
  :root {
    --sl-sidebar-width: 12rem;
    --sl-toc-width: 13rem;
  }
}
/* Riduce la larghezza della sidebar */
:root {
  /* Larghezza sidebar ridotta da 18rem (default) a 14rem */
  --sl-sidebar-width: 14rem;
  /* Larghezza sidebar destra (TOC). Default ~18rem: la riduciamo per recuperare spazio. */
  --sl-toc-width: 12.5rem;
}

/* Su schermi medi, riduce ulteriormente */
@media (min-width: 50rem) and (max-width: 72rem) {
  :root {
    --sl-sidebar-width: 12rem;
    --sl-toc-width: 13rem;
  }
}

/* Aumenta la larghezza massima del contenuto principale su schermi molto grandi */
@media (min-width: 90rem) {
  :root {
    /* Crescita progressiva su desktop grandi, con limiti ragionevoli */
    --sl-content-width: clamp(54rem, 60vw, 74rem);
  }
  /* Su schermi grandi, allinea il contenuto a sinistra del main-pane */
  [data-has-sidebar][data-has-toc] .main-pane {
    --sl-content-margin-inline: 0 auto;
  }
}
@media (min-width: 120rem) {
  :root {
    /* Su monitor molto ampi, usa più spazio ma mantieni un massimo */
    --sl-content-width: clamp(62rem, 58vw, 82rem);
  }
}

/* Riduce il padding interno della sidebar per ottimizzare lo spazio */
.sidebar-content {
  padding: 1rem 0.75rem;
}

/* Riduce font-size dei link della sidebar se serve più compattezza */
.sidebar nav a {
  font-size: 0.9rem;
  padding: 0.25rem 0.75rem;
}

/* Riduce indentazione dei sottomenu */
.sidebar nav ul ul {
  padding-inline-start: 1rem;
}

/* Sidebar destra (TOC): compattiamo padding e tipografia */
.right-sidebar-panel {
  padding: 1rem 0.75rem;
}

.right-sidebar-panel a {
  font-size: 0.92rem;
  line-height: 1.35;
  padding-block: 0.2rem;
}

/* Spazio minore tra i livelli della TOC */
.right-sidebar-panel ul ul {
  margin-top: 0.25rem;
  padding-inline-start: 0.9rem;
}

/* Forza la larghezza del pannello TOC a destra solo su desktop */
@media (min-width: 72rem) {
  .right-sidebar-panel .sl-container {
    width: var(--sl-toc-width) !important;
    max-width: var(--sl-toc-width) !important;
  }
  /* Riduci anche il padding orizzontale del pannello TOC */
  .right-sidebar-panel {
    padding-inline: 0.75rem;
  }
  /* Stringi l'intera colonna destra e lascia che il main occupi lo spazio residuo */
  .right-sidebar-container {
    /* larghezza totale colonna destra (contenitore fisso + padding) */
    --_toc-col-width: calc(var(--sl-toc-width) + 2 * var(--sl-sidebar-pad-x));
    width: var(--_toc-col-width) !important;
    flex: 0 0 var(--_toc-col-width) !important;
  }
  [data-has-sidebar][data-has-toc] .main-pane {
    /* Evita lo spostamento a destra: centra i pannelli di contenuto */
    --sl-content-margin-inline: auto;
    width: auto !important;
    flex: 1 1 auto !important;
  }
}

/* Migliorie estetiche per blocchi di codice e evidenziazione sintattica */
/* Copre pre/code generici, Prism e output di Shiki */
pre, code, .sl-code, .code-block {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Segoe UI Mono", "Fira Code", "Courier New", monospace;
  font-variant-ligatures: contextual;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Blocchi di codice (multilinea) */
pre[class*="language-"], pre code, .code-block, .sl-code {
  background: var(--code-bg, #f6f8fa);
  color: var(--code-color, #0f172a);
  padding: 0.9rem 1rem;
  margin: 1rem 0;
  border-radius: 0.5rem;
  font-size: 0.9rem;
  line-height: 1.5;
  overflow: auto;
  white-space: pre;
  tab-size: 2;
  box-shadow: var(--code-shadow, 0 1px 0 rgba(15,23,42,0.03));
}

/* Inline code */
code:not(pre code) {
  background: rgba(27,31,35,0.05);
  padding: 0.15rem 0.35rem;
  border-radius: 0.35rem;
  font-size: 0.92em;
}

/* Forza il wrapping visivo per parole molto lunghe e evita overflow sporgente */
pre[class*="language-"] code, pre code {
  word-break: break-word;
  /* mantieni monospace e permetti lo scorrimento orizzontale quando necessario */
  white-space: pre;
}

/* Migliora accessibilità: evidenzia il focus sul blocco codice */
pre:focus, pre:focus-within {
  outline: 3px solid rgba(59,130,246,0.15);
  outline-offset: 2px;
}

/* Stile per token di evidenziazione (Prism/Shiki) - mantiene contrasto e leggibilità */
.token.comment, .token.prolog, .token.doctype, .token.cdata {
  opacity: 0.7;
}

.token.punctuation { opacity: 0.95; }

.token.keyword, .token.selector, .token.function {
  font-weight: 600;
}

/* Dark mode: usa colori più scuri */
@media (prefers-color-scheme: dark) {
  pre[class*="language-"], pre code, .code-block, .sl-code {
    background: var(--code-bg-dark, #0b1220);
    color: var(--code-color-dark, #e6eef6);
    box-shadow: none;
  }
  code:not(pre code) {
    background: rgba(255,255,255,0.04);
  }
}

/* Fallback per temi che impostano un attributo sul body (es. data-theme="dark") */
body[data-theme="dark"] pre[class*="language-"],
body[data-theme="dark"] pre code, body[data-theme="dark"] .code-block {
  background: var(--code-bg-dark, #0b1220);
  color: var(--code-color-dark, #e6eef6);
}

/* Riduci la dimensione della linea di numero (se presente) e separatore */
.code-block .line-numbers, .sl-code .line-numbers {
  color: rgba(255,255,255,0.4);
  font-size: 0.8rem;
  padding-right: 0.65rem;
}

/* Assicura che elementi inline generati da Shiki/Prism non rompano il layout */
.token {
  display: inline;
}
